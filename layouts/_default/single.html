{{ define "main" }}
<link rel="stylesheet" href="/css/skeleton.css">
<!-- single.html <head>ì— ì¶”ê°€ -->
<script>
// ğŸ¯ í™•ì¥ í”„ë¡œê·¸ë¨ ì¶©ëŒ ë°©ì§€
window.addEventListener('error', function(e) {
    if (e.message && e.message.includes('message channel closed')) {
        e.preventDefault();
        console.warn('í™•ì¥ í”„ë¡œê·¸ë¨ ê´€ë ¨ ì—ëŸ¬ ë¬´ì‹œë¨');
    }
});

// ğŸ¯ Promise rejection ì—ëŸ¬ ì²˜ë¦¬
window.addEventListener('unhandledrejection', function(e) {
    if (e.reason && e.reason.toString().includes('message channel closed')) {
        e.preventDefault();
        console.warn('í™•ì¥ í”„ë¡œê·¸ë¨ Promise ì—ëŸ¬ ë¬´ì‹œë¨');
    }
});
</script>

<section class="post-section">
    <div class="container">
        <div class="post-container">
            <!-- ê²Œì‹œê¸€ í—¤ë” -->
            <div class="post-header">
                <h1 class="post-title">{{ .Title }}</h1>
                <div class="post-meta">
                    <span class="post-date">{{ .Date.Format "2006.01.02" }}</span>
                    <!-- ì¹´í…Œê³ ë¦¬ í‘œì‹œ -->
                    {{ if .Params.categories }}
                        <span class="post-category">
                            {{ $mainCategory := index .Params.categories 0 }}
                            {{ if eq $mainCategory "web" }}ì›¹ ë””ìì¸{{ end }}
                            {{ if eq $mainCategory "ad" }}ê´‘ê³ /ì¸ì‡„ ë””ìì¸{{ end }}
                            {{ if eq $mainCategory "content" }}ì»¨í…ì¸  ë””ìì¸{{ end }}
                            {{ if eq $mainCategory "creative" }}í¬ë¦¬ì—ì´í‹°ë¸Œ ë””ìì¸{{ end }}
                            {{ if eq $mainCategory "programming" }}í”„ë¡œê·¸ë˜ë°{{ end }}
                            {{ if eq $mainCategory "video" }}ì˜ìƒ ë””ìì¸{{ end }}
                            {{ if eq $mainCategory "project" }}í”„ë¡œì íŠ¸{{ end }}
                            {{ if .Params.subCategory }}
                                > {{ .Params.subCategory }}
                            {{ end }}
                        </span>
                    {{ else if eq .Section "news" }}
                        <span class="post-category">ì†Œì‹</span>
                    {{ end }}
                </div>
            </div>

           <!-- ê²Œì‹œê¸€ ë‚´ìš© -->
            <div class="post-content">
                <!-- ë™ì˜ìƒ ë˜ëŠ” ì´ë¯¸ì§€ í‘œì‹œ -->
                <div class="post-media">
                    <!-- ì›¹ ë°ëª¨ ì½”ë“œê°€ ìˆëŠ” ê²½ìš° (í”„ë¡ íŠ¸ì—”ë“œ/í¼ë¸”ë¦¬ì‹± ì¹´í…Œê³ ë¦¬) -->
                    {{ if .Params.demoCode }}
                        {{ $demoCodeContent := "" }}
                        
                        <!-- demoCodeê°€ ë§µ í˜•íƒœì¸ì§€ í™•ì¸í•˜ê³  ì²˜ë¦¬ -->
                        {{ if reflect.IsMap .Params.demoCode }}
                            <!-- Netlify CMS code widget: {lang: "html", code: "ì‹¤ì œì½”ë“œ"} í˜•íƒœ -->
                            {{ $demoCodeContent = index .Params.demoCode "code" }}
                        {{ else }}
                            <!-- ë‹¨ìˆœ ë¬¸ìì—´ì¸ ê²½ìš° -->
                            {{ $demoCodeContent = .Params.demoCode }}
                        {{ end }}
                        
                        <!-- ë°ëª¨ ì½”ë“œ ë‚´ìš©ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ -->
                        {{ if and $demoCodeContent (ne $demoCodeContent "") }}
                            {{ $themeClass := "" }}
                            {{ if .Params.demoTheme }}
                                {{ if ne .Params.demoTheme "default" }}
                                    {{ $themeClass = printf "%s-theme" .Params.demoTheme }}
                                {{ end }}
                            {{ end }}
                            
                            <div class="web-demo-container">
                                <div class="demo-frame {{ $themeClass }}">
                                    <div class="demo-browser-bar">
                                        <div class="demo-browser-buttons">
                                            <span class="browser-btn red"></span>
                                            <span class="browser-btn yellow"></span>
                                            <span class="browser-btn green"></span>
                                        </div>
                                        <div class="demo-url-bar">{{ .Title }} - Live Demo</div>
                                        <!-- ğŸ¯ ì „ì²´í™”ë©´/ìƒˆì°½ ë²„íŠ¼ ì¶”ê°€ -->
                                        <div class="demo-actions">
                                            <button class="demo-action-btn" onclick="openFullscreen()" title="ì „ì²´í™”ë©´ìœ¼ë¡œ ë³´ê¸°">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                                                </svg>
                                            </button>
                                            <button class="demo-action-btn" onclick="openInNewTab()" title="ìƒˆ íƒ­ì—ì„œ ì—´ê¸°">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <!-- Base64 ì¸ì½”ë”© ë°©ì‹ ìœ ì§€ -->
                                    <iframe id="demo-iframe" 
                                            class="demo-iframe" 
                                            src="data:text/html;charset=utf-8;base64,{{ $demoCodeContent | base64Encode }}" 
                                            width="100%" 
                                            height="600px" 
                                            frameborder="0"
                                            sandbox="allow-scripts allow-same-origin">
                                    </iframe>
                                </div>
                            </div>

                            <!-- ì „ì²´í™”ë©´ ëª¨ë‹¬ -->
                            <div id="fullscreen-modal" class="fullscreen-modal">
                                <div class="fullscreen-header">
                                    <div class="fullscreen-title">
                                        <h3>{{ .Title }} - ì „ì²´í™”ë©´ ë°ëª¨</h3>
                                    </div>
                                    <div class="fullscreen-controls">
                                        <button class="control-btn" onclick="refreshDemo()" title="ìƒˆë¡œê³ ì¹¨">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                                            </svg>
                                        </button>
                                        <button class="control-btn" onclick="openInNewTab()" title="ìƒˆ íƒ­ì—ì„œ ì—´ê¸°">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                                            </svg>
                                        </button>
                                        <button class="control-btn close-btn" onclick="closeFullscreen()" title="ë‹«ê¸°">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="fullscreen-content">
                                    <iframe id="fullscreen-iframe" 
                                            src="data:text/html;charset=utf-8;base64,{{ $demoCodeContent | base64Encode }}" 
                                            width="100%" 
                                            height="100%" 
                                            frameborder="0"
                                            sandbox="allow-scripts allow-same-origin">
                                    </iframe>
                                </div>
                            </div>

                            <!-- ìˆ¨ê²¨ì§„ ë°ì´í„° ì €ì¥ -->
                            <script type="application/json" id="demo-data">
                            {
                                "title": "{{ .Title }}",
                                "code": "{{ $demoCodeContent | base64Encode }}"
                            }
                            </script>
                        {{ end }}
                    {{ end }}

                    {{ if .Params.videoUrl }}
                        <!-- YouTube ë™ì˜ìƒì´ ìˆëŠ” ê²½ìš° -->
                        {{ $videoId := "" }}
                        {{ if (findRE "youtube\\.com|youtu\\.be" .Params.videoUrl) }}
                            {{ $videoId = replaceRE ".*(?:youtube\\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\\.be/)([^\"&?/ ]{11}).*" "$1" .Params.videoUrl }}
                            <!-- VideoObject ìŠ¤í‚¤ë§ˆ ì¶”ê°€ -->
                            {{ partial "video-schema.html" (dict "videoId" $videoId "videoType" "youtube" "title" .Title "date" .Date) }}           
                            <!-- YouTube ì„ë² ë“œ ì˜ìƒ -->
                            <div class="video-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; margin-bottom: 20px;">
                                <iframe 
                                    src="https://www.youtube.com/embed/{{ $videoId }}" 
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                                    frameborder="0" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                       {{ else if (findRE "vimeo\\.com" .Params.videoUrl) }}
                            <!-- Vimeo ì§€ì› -->
                            {{ $videoId := replaceRE ".*vimeo\\.com/([0-9]+).*" "$1" .Params.videoUrl }}
                            <!-- VideoObject ìŠ¤í‚¤ë§ˆ ì¶”ê°€ -->
                            {{ partial "video-schema.html" (dict "videoId" $videoId "videoType" "vimeo" "title" .Title "date" .Date "site" $.Site) }}
                            <div class="video-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; margin-bottom: 20px;">
                                <iframe 
                                    src="https://player.vimeo.com/video/{{ $videoId }}?responsive=1&autopause=0&player_id=0&app_id=58479" 
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                                    frameborder="0" 
                                    allow="autoplay; fullscreen; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                            </div>
                        {{ end }}
                    {{ end }}

                  
                </div>

                <div class="post-body" data-category="{{ if .Params.categories }}{{ index .Params.categories 0 }}{{ end }}">
                    {{ $content := .Content }}
                    
                    <!-- ë³¸ë¬¸ì—ì„œ ë™ì˜ìƒ ID ì¶”ì¶œ ë° ìŠ¤í‚¤ë§ˆ ìƒì„± -->
                    {{ $youtubeMatches := findRE "youtube\\.com/watch\\?v=([a-zA-Z0-9_-]+)|youtu\\.be/([a-zA-Z0-9_-]+)|youtube\\.com/shorts/([a-zA-Z0-9_-]+)" $content }}
                    {{ $vimeoMatches := findRE "vimeo\\.com/([0-9]+)" $content }}
                    
                    <!-- YouTube ìŠ¤í‚¤ë§ˆ ìƒì„± (ì¤‘ë³µ ì œê±°) -->
                    {{ $processedYouTubeIds := slice }}
                    {{ range $youtubeMatches }}
                        {{ $videoId := replaceRE ".*(?:youtube\\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\\.be/|youtube\\.com/shorts/)([a-zA-Z0-9_-]+).*" "$1" . }}
                        {{ if and $videoId (not (in $processedYouTubeIds $videoId)) }}
                            {{ $processedYouTubeIds = $processedYouTubeIds | append $videoId }}
                            {{ partial "video-schema.html" (dict "videoId" $videoId "videoType" "youtube" "title" $.Title "date" $.Date "site" $.Site) }}
                        {{ end }}
                    {{ end }}
                    
                    <!-- Vimeo ìŠ¤í‚¤ë§ˆ ìƒì„± (ì¤‘ë³µ ì œê±°) -->
                    {{ $processedVimeoIds := slice }}
                    {{ range $vimeoMatches }}
                        {{ $videoId := replaceRE ".*vimeo\\.com/([0-9]+).*" "$1" . }}
                        {{ if and $videoId (not (in $processedVimeoIds $videoId)) }}
                            {{ $processedVimeoIds = $processedVimeoIds | append $videoId }}
                            {{ partial "video-schema.html" (dict "videoId" $videoId "videoType" "vimeo" "title" $.Title "date" $.Date "site" $.Site) }}
                        {{ end }}
                    {{ end }}
                    
                    <!-- ê¸°ì¡´ URL â†’ iframe ë³€í™˜ ì²˜ë¦¬ -->
                    <!-- a íƒœê·¸ë¡œ ê°ì‹¸ì§„ YouTube URL ì²˜ë¦¬ -->
                    {{ $content = $content | replaceRE "<p><a href=\"https://www\\.youtube\\.com/watch\\?v=([a-zA-Z0-9_-]+)[^\"]*\">https://www\\.youtube\\.com/watch\\?v=[^<]+</a></p>" "<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://www.youtube.com/watch?v=$1\" target=\"_blank\">ğŸ”— YouTubeì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    <!-- ì¼ë°˜ p íƒœê·¸ë¡œ ê°ì‹¸ì§„ YouTube URL ì²˜ë¦¬ -->
                    {{ $content = $content | replaceRE "<p>https://www\\.youtube\\.com/watch\\?v=([a-zA-Z0-9_-]+)[^<]*</p>" "<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://www.youtube.com/watch?v=$1\" target=\"_blank\">ğŸ”— YouTubeì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    <!-- youtu.be í˜•íƒœë„ ì²˜ë¦¬ -->
                    {{ $content = $content | replaceRE "<p><a href=\"https://youtu\\.be/([a-zA-Z0-9_-]+)[^\"]*\">https://youtu\\.be/[^<]+</a></p>" "<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://youtu.be/$1\" target=\"_blank\">ğŸ”— YouTubeì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    <!-- âœ¨ YouTube Shorts URL ì²˜ë¦¬ (ìƒˆë¡œ ì¶”ê°€) -->
                    <!-- a íƒœê·¸ë¡œ ê°ì‹¸ì§„ YouTube Shorts URL -->
                    {{ $content = $content | replaceRE "<p><a href=\"https://www\\.youtube\\.com/shorts/([a-zA-Z0-9_-]+)[^\"]*\">https://www\\.youtube\\.com/shorts/[^<]+</a></p>" "<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://www.youtube.com/shorts/$1\" target=\"_blank\">ğŸ”— YouTube Shortsì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    <!-- ì¼ë°˜ p íƒœê·¸ë¡œ ê°ì‹¸ì§„ YouTube Shorts URL -->
                    {{ $content = $content | replaceRE "<p>https://www\\.youtube\\.com/shorts/([a-zA-Z0-9_-]+)[^<]*</p>" "<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://www.youtube.com/shorts/$1\" target=\"_blank\">ğŸ”— YouTube Shortsì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    <!-- youtube.com/shorts (www ì—†ëŠ” ë²„ì „) -->
                    {{ $content = $content | replaceRE "<p><a href=\"https://youtube\\.com/shorts/([a-zA-Z0-9_-]+)[^\"]*\">https://youtube\\.com/shorts/[^<]+</a></p>" "<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://youtube.com/shorts/$1\" target=\"_blank\">ğŸ”— YouTube Shortsì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    {{ $content = $content | replaceRE "<p>https://youtube\\.com/shorts/([a-zA-Z0-9_-]+)[^<]*</p>" "<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://youtube.com/shorts/$1\" target=\"_blank\">ğŸ”— YouTube Shortsì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    <!-- Vimeo URL ì²˜ë¦¬ (ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì œê±°) -->
                    {{ $content = $content | replaceRE "<p><a href=\"https://vimeo\\.com/([0-9]+)[^\"]*\">https://vimeo\\.com/[^<]+</a></p>" "<div class=\"video-container\"><iframe src=\"https://player.vimeo.com/video/$1?responsive=1&autopause=0&player_id=0&app_id=58479\" frameborder=\"0\" allow=\"autoplay; fullscreen; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://vimeo.com/$1\" target=\"_blank\">ğŸ”— Vimeoì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    {{ $content = $content | replaceRE "<p>https://vimeo\\.com/([0-9]+)[^<]*</p>" "<div class=\"video-container\"><iframe src=\"https://player.vimeo.com/video/$1?responsive=1&autopause=0&player_id=0&app_id=58479\" frameborder=\"0\" allow=\"autoplay; fullscreen; picture-in-picture\" allowfullscreen></iframe></div><p class=\"video-link\"><a href=\"https://vimeo.com/$1\" target=\"_blank\">ğŸ”— Vimeoì—ì„œ ë³´ê¸°</a></p>" }}
                    
                    {{ $content | safeHTML }}
                </div>

                <!-- íƒœê·¸ í‘œì‹œ (ë³¸ë¬¸ ìµœí•˜ë‹¨) - íƒ€ì… ì•ˆì „ ì²˜ë¦¬ -->
                {{ if or .Params.tags .Params.custom_tags }}
                <div class="tags-container">
                    <!-- ê¸°ë³¸ íƒœê·¸ ìš°ì„  í‘œì‹œ -->
                    {{ range .Params.tags }}
                    <span class="project-scale-badge">{{ . }}</span>
                    {{ end }}
                    <!-- ì»¤ìŠ¤í…€ íƒœê·¸ (ë‘ í˜•ì‹ ëª¨ë‘ ì§€ì›) -->
                    {{ range .Params.custom_tags }}
                        {{ $tagValue := . }}
                        {{ if reflect.IsMap . }}
                            {{ $tagValue = .tag }}
                        {{ end }}
                        <span class="project-scale-badge">{{ $tagValue }}</span>
                    {{ end }}
                </div>
                {{ end }}
            </div>

        <!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="post-navigation">
            {{ $posts := slice }}
            {{ $listUrl := "" }}
            
            {{ $from := .Params.from | default "" }}
            
            {{ if eq .Section "games" }}
                {{ $posts = where .Site.RegularPages "Section" "games" }}
                {{ $listUrl = "/games/" }}
            {{ else if eq .Section "freeboard" }}
                {{ $posts = where .Site.RegularPages "Section" "freeboard" }}
                {{ $listUrl = "/freeboard/" }}
            {{ else if eq .Section "news" }}
                {{ $posts = where .Site.RegularPages "Section" "news" }}
                {{ $listUrl = "/news/" }}
            {{ else if eq .Section "notice" }}
                {{ $posts = where .Site.RegularPages "Section" "notice" }}
                {{ $listUrl = "/notice/" }}
            {{ else if eq .Section "posts" }}
                {{ $currentCategory := index .Params.categories 0 }}
                {{ $posts = where .Site.RegularPages "Params.categories" "intersect" (slice $currentCategory) }}
                {{ $listUrl = "/posts/" }}
            {{ end }}
            
            {{ $posts = $posts.ByDate.Reverse }}
            {{ $currentIndex := 0 }}
            {{ range $index, $post := $posts }}
                {{ if eq $post.Permalink $.Permalink }}
                    {{ $currentIndex = $index }}
                {{ end }}
            {{ end }}
            
            <!-- ì´ì „ ê²Œì‹œê¸€ -->
            {{ $prevIndex := add $currentIndex 1 }}
            {{ if lt $prevIndex (len $posts) }}
                {{ $prevPost := index $posts $prevIndex }}
                <a href="{{ $prevPost.RelPermalink }}" class="nav-previous">
                    <i class="fas fa-chevron-left"></i> ì´ì „
                </a>
            {{ else }}
                <span></span>
            {{ end }}
            
            <!-- ëª©ë¡ìœ¼ë¡œ -->
            <a href="{{ $listUrl | relURL }}" class="nav-list">ëª©ë¡ìœ¼ë¡œ</a>

            <!-- ë‹¤ìŒ ê²Œì‹œê¸€ -->
            {{ $nextIndex := sub $currentIndex 1 }}
            {{ if ge $nextIndex 0 }}
                {{ $nextPost := index $posts $nextIndex }}
                <a href="{{ $nextPost.RelPermalink }}" class="nav-next">
                    ë‹¤ìŒ <i class="fas fa-chevron-right"></i>
                </a>
            {{ else }}
                <span></span>
            {{ end }}
        </div>
        </div>
    </div>
    
    <!-- JavaScript íŒŒì¼ë“¤ -->
    <script src="/js/lightbox.js"></script>
    <!-- ğŸ¯ ì›¹ë°ëª¨ JavaScript ì¶”ê°€ -->
    <script src="/js/web-demo.js"></script>
    <!-- ìŠ¤ì¼ˆë ˆí†¤ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/js/skeleton.js"></script>

    <!-- single.htmlì˜ <head> ì„¹ì…˜ì— ì¶”ê°€ -->
<script>
// ğŸ¯ ì¦‰ì‹œ ì‹¤í–‰: LCP ì´ë¯¸ì§€ preload
(function() {
    function supportsWebP() {
        try {
            const canvas = document.createElement('canvas');
            return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;
        } catch (e) {
            return false;
        }
    }
    
    // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ preload
    const firstImageSrc = '{{ if .Params.featured_image }}{{ .Params.featured_image }}{{ else }}{{ with (index (.Resources.ByType "image") 0) }}{{ .RelPermalink }}{{ end }}{{ end }}';
    if (firstImageSrc) {
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as = 'image';
        link.href = supportsWebP() ? firstImageSrc.replace(/\.(png|jpg|jpeg)$/i, '.webp') : firstImageSrc;
        document.head.appendChild(link);
    }
})();
</script>
   

    
</section>
{{ end }}